import matplotlib.pyplot as plt
import numpy as np
from scipy.signal import savgol_filter

pensieve_QoE_rebuff = [-258.640875237917, -69.25259623296293, -17.276851641283,33.31949579130733, 62.87492830778905, 105.77538432927966, 130.77953199762976, 190.77538432927966, 214.31071476252635, 248.16646215026253, 256.39345233683497, 341.3422508856545, 368.77953199762976, 371.68380719853775, 379.5679600086146, 401.5505289349258, 423.51181710675917, 428.96960108613416, 438.3875095366653, 430.5679600086146, 418.93124756160273, 395.85318633189235, 409.5419063892809, 474.50816885380357, 475.72567163004953, 437.34929857017374, 448.349025737601, 460.36176860275566, 445.6371669384604, 462.2020864767993, 441.7410407657332, 456.6001788794436,444.50816885380357, 404.50816885380357, 415.72567163004953, 397.34929857017374, 406.349025737601, 384.36176860275566, 369.6371669384604, 362.2020864767993, 371.7410407657332, 356.6001788794436, 342.4735532011245, 336.06021163479346, 367.7339586582168, 326.1070956060658, 359.00363147591173, 316.3513111578388, 302.78276102302783, 347.4364829871299, 364.8604917175257, 313.975973145538, 336.06021163479346, 357.7339586582168, 326.1070956060658, 312.00363147591173, 306.3513111578388, 332.78276102302783, 307.4364829871299, 344.8604917175257, 323.975973145538, 303.275973145538]
Merina_QoE_rebuff = [-308.761875238918, 39.77538432927916, 80.61604753879425,37.36176860275566, 134.25259623296293, 225.06021163479346, 243.73183109364975, 294.83383682872459, 247.31071476252635, 259.51181710675917, 308.39345233683497, 285.3422508856545, 307.2152887279186, 278.68380719853775, 304.7541125734015, 329.5505289349258, 313.51181710675917, 312.96960108613416, 338.72567163004953, 300.5679600086146, 282.72567163004953, 315.5679600086146, 341.5419063892809, 321.50816885380357, 272.72567163004953, 317.3875095366653, 346.349025737601, 286.36176860275566, 311.6371669384604, 301.2020864767993, 299.81113765412722  , 290.15532239264572  , 300.50949807207595  , 284.50816885380357, 281.72567163004953, 277.34929857017374, 262.349025737601, 261.36176860275566, 243.6371669384604, 231.2020864767993, 257.7410407657332, 224.6001788794436, 227.4735532011245, 259.06021163479346, 221.7339586582168, 215.1070956060658, 246.00363147591173, 229.3513111578388, 251.78276102302783, 227.4364829871299, 258.8604917175257, 224.975973145538, 256.06021163479346, 254.7339586582168, 241.1070956060658, 228.00363147591173, 249.3513111578388, 214.78276102302783, 251.4364829871299, 221.8604917175257, 248.975973145538, 226.275973145538]
Netllm_QoE_rebuff = [-207.8927113871389, 103.73953139762976, 107.276851641283,183.61604753879425, 172.87492830778905, 285.2020864767993, 255.16646215026253, 338.25259623296293, 294.31071476252635, 338.16646215026253, 360.77953199762976, 345.3422508856545, 372.2152887279186, 357.68380719853775, 388.7541125734015, 354.2152887279186, 405.51181710675917, 418.5679600086146, 384.3875095366653, 387.72567163004953, 428.93124756160273, 443.3875095366653, 406.72567163004953, 404.50816885380357, 463.5679600086146, 431.34929857017374, 414.349025737601, 411.36176860275566, 392.6371669384604, 421.2020864767993, 409.7410407657332, 382.6001788794436, 390.5419063892809, 413.50816885380357, 382.72567163004953, 357.34929857017374, 326.349025737601, 320.36176860275566, 301.6371669384604, 276.2020864767993, 249.7410407657332, 236.6001788794436, 222.4735532011245, 210.06021163479346, 234.7339586582168, 253.1070956060658, 204.00363147591173, 208.3513111578388, 218.78276102302783, 244.4364829871299, 194.8604917175257, 203.975973145538, 236.06021163479346, 207.7339586582168, 196.1070956060658, 232.00363147591173, 217.3513111578388, 222.78276102302783, 197.1070956060658, 208.8604917175257, 206.1070956060658, 211.275973145538]
genet_QoE_rebuff = [-288.640875237917, -85.3422508856545, -33.276851641283,54.4975316749754, 128.87492830778905, 97.61604753879425, 160.84351987456963, 124.61604753879425, 181.31071476252635, 243.16646215026253, 286.39345233683497, 231.3422508856545, 312.51181710675917, 365.2152887279186, 378.7541125734015, 345.5505289349258, 412.51181710675917, 383.96960108613416, 377.3875095366653, 402.72567163004953, 418.93124756160273, 400.85318633189235, 394.5419063892809, 430.50816885380357, 426.72567163004953, 407.34929857017374, 428.72567163004953, 453.36176860275566, 395.6371669384604, 423.2020864767993, 443.7410407657332, 411.6001788794436,400.50816885380357, 407.72567163004953, 400.72567163004953, 382.34929857017374, 371.349025737601, 375.36176860275566, 382.6371669384604, 357.2020864767993, 350.7410407657332, 338.6001788794436, 354.4735532011245, 323.06021163479346, 314.7339586582168, 297.1070956060658, 276.00363147591173, 260.3513111578388, 288.78276102302783, 256.4364829871299, 237.8604917175257, 226.975973145538, 243.06021163479346, 221.275973145538, 219.1070956060658, 208.00363147591173, 229.275973145538, 216.78276102302783, 255.4364829871299,230.275973145538,248.975973145538, 247.275973145538]


# print(len(QoE_rebuff))
# print(len(QoE_hd))
window_Len= 10
pensieve_smooth = savgol_filter(np.array(pensieve_QoE_rebuff)/48/11.96 * 100, window_length=window_Len, polyorder=5)
Merina_hd_smooth = savgol_filter(np.array(Merina_QoE_rebuff)/48/11.96 * 100, window_length=window_Len, polyorder=5)
Netllm_hd_smooth = savgol_filter(np.array(Netllm_QoE_rebuff)/48/11.96 * 100, window_length=window_Len, polyorder=5)
genet_hd_smooth = savgol_filter(np.array(genet_QoE_rebuff)/48/11.96 * 100, window_length=window_Len, polyorder=5)

plt.rcParams.update({'font.size': 20})
plt.figure(figsize=(10, 4))
Line_width = 3.5
plt.plot(pensieve_smooth, label='Pensieve', linewidth=Line_width, linestyle='-', color='#2b908f')
plt.plot(Merina_hd_smooth, label='Merina', linewidth=Line_width, linestyle='--',color='#c67200')
plt.plot(Netllm_hd_smooth, label='Netllm', linewidth=Line_width, linestyle='-.',color='#5a58c9')
plt.plot(genet_hd_smooth, label='Genet', linewidth=Line_width, linestyle=':',color='#2e75b6')

plt.plot([30 ,30] ,[-25,100], linewidth=4, linestyle="--",color = 'black')
plt.axvspan(30, 60, facecolor='#f8b8a8', alpha=0.6)


plt.grid(True)
plt.xticks([0,12,24,36,48,60],['0','20', '40', '60','80','100'])#设置刻度的字体大小
plt.yticks([-25,-0,25,50,75,100])
plt.axis([0,60,-25,100])  #设置x,y 范围
plt.xlabel('Training progress(%)',fontsize = 20)
plt.ylabel('Normalize QoE-rebuff',fontsize = 20)
plt.subplots_adjust(left=0.07, right=0.98, top=0.87, bottom=0.12)
plt.legend(loc='lower center', bbox_to_anchor=(0.5, 0.05), ncol=2,fontsize=20)
plt.savefig('F_5.svg', dpi=600, orientation='portrait', format='svg',transparent=False, bbox_inches='tight', pad_inches=0.1)

